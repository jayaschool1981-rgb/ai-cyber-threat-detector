<!DOCTYPE html>
<html>
<head>
  <title>AI Cyber Threat Detector</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5" style="max-width:600px;">
  <h2 class="text-center mb-4">AI Cyber Threat Detection</h2>

  <div class="card shadow-sm">
    <div class="card-body">

      <div class="mb-3">
        <label class="form-label">Destination Port</label>
        <input id="port" class="form-control" type="number" value="80">
      </div>

      <div class="mb-3">
        <label class="form-label">Flow Duration</label>
        <input id="duration" class="form-control" type="number" value="1000">
      </div>

      <div class="mb-3">
        <label class="form-label">Total Fwd Packets</label>
        <input id="pkts" class="form-control" type="number" value="2">
      </div>

      <button onclick="predict()" class="btn btn-primary w-100">Predict</button>

      <div id="result" class="alert mt-4 d-none"></div>

    </div>
  </div>
</div>

<script>
async function predict(){
  const payload = {
    "Destination Port": parseInt(document.getElementById("port").value),
    "Flow Duration": parseInt(document.getElementById("duration").value),
    "Total Fwd Packets": parseInt(document.getElementById("pkts").value)
  };

  document.getElementById("result").classList.add("d-none");

  const res = await fetch("http://127.0.0.1:5000/predict", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify(payload)
  });

  const data = await res.json();
  console.log(data);

  let r = data[0];

  let box = document.getElementById("result");
  box.classList.remove("d-none");

  if(r.prediction === "BENIGN"){
    box.className = "alert alert-success mt-4";
  } else {
    box.className = "alert alert-danger mt-4";
  }

  box.innerHTML = `<b>${r.prediction}</b> (confidence ${Math.round(r.confidence*100)}%)`;
}
</script>

</body>
</html>
